<?xml version="1.0" encoding="UTF-8"?>
<root BTCPP_format="4"
      main_tree_to_execute="tree">
  <BehaviorTree ID="tree">
    <Sequence>
      <AddObject step_name="add table"
                 object_name="table"
                 frame_id="world"
                 position="0.5, -0.25, -0.05.0,0.0,0.0,0.0"
                 object_shape="1"
                 object_dimensions="0.4, 0.5, 0.1"/>
      <AddObject step_name="add object"
                 object_name="object"
                 frame_id="world"
                 position="0.5, -0.25, 0.125,0.0,0.0,0.0"
                 object_shape="3"
                 object_dimensions="0.25, 0.02"/>
      <CurrentState step_name="current"/>
      <MoveTo step_name="open hand"
              group="hand"
              goal="open"
              planner_type="Pipeline"/>
      <Connect step_name="move to pick"
               group_planner_map="panda_arm:pipeline"/>
      <SerialContainer container_name="Pick Object">
        <MoveRelative step_name="approach object"
                      planner_type="Cartesian"
                      link="panda_link8"
                      frame_id="panda_link8"
                      direction="0.0,0.0,1.0"/>
        <ComputeIK step_name="grasp  pose ik"
                   ik_frame_link="panda_link8"
                   ik_frame_pose="0.0, 0.0, 0.1, 1.571, 0.785, 1.571">
          <GenerateGraspPose step_name="grasp pose"
                             object_name="object"
                             monitored_step_name="current"/>
        </ComputeIK>
        <ModifyPlanningScene step_name="allow collision (hand,object)"
                             modify_scene="collisions_enabled"
                             object_names="object"
                             other_object_type="robot"
                             other_object_names="hand"
                             collisions_enabled="true"/>
        <MoveTo step_name="close hand"
                group="hand"
                goal="close"
                planner_type="Pipeline"/>
        <ModifyPlanningScene step_name="attach object"
                             modify_scene="attach_enabled"
                             object_names="object"
                             other_object_type="robot"
                             other_object_names="panda_link8"
                             collisions_enabled="true"/>
        <ModifyPlanningScene step_name="allow collision (object,support)"
                             modify_scene="collisions_enabled"
                             object_names="object"
                             other_object_type="obkect"
                             other_object_names="table"
                             collisions_enabled="true"/>
        <MoveRelative step_name="lift object"
                      planner_type="Cartesian"
                      link="panda_link8"
                      frame_id="world"
                      direction="0.0,0.0,1.0"/>
        <ModifyPlanningScene step_name="forbid collision (object,surface)"
                             modify_scene="collisions_enabled"
                             object_names="object"
                             other_object_type="obkect"
                             other_object_names="table"
                             collisions_enabled="false"/>
      </SerialContainer>
      <Connect step_name="move to place"
               group_planner_map="panda_arm:pipeline"/>
      <SerialContainer container_name="place object">
        <MoveRelative step_name="lower object"
                      planner_type="Cartesian"
                      link="panda_link8"
                      frame_id="world"
                      direction="0.0,0.0,-1.0"/>
        <ComputeIK step_name="grasp  place  ik"
                   ik_frame_link="panda_link8"
                   ik_frame_pose="0.0, 0.0, 0.1, 1.571, 0.785, 1.571">
          <GeneratePlacePose step_name="generate place pose"
                             object_name="object"
                             monitored_step_name="Pick Object"/>
        </ComputeIK>
        <MoveTo step_name="open hand"
                group="hand"
                goal="open"
                planner_type="Pipeline"/>
        <ModifyPlanningScene step_name="forbid collision (hand,object)"
                             modify_scene="collisions_enabled"
                             object_names="object"
                             other_object_type="robot"
                             other_object_names="hand"
                             collisions_enabled="false"/>
        <ModifyPlanningScene step_name="attach object"
                             modify_scene="attach_enabled"
                             object_names="object"
                             other_object_type="robot"
                             other_object_names="panda_link8"
                             collisions_enabled="false"/>
        <MoveRelative step_name="retreat after place"
                      planner_type="Cartesian"
                      link="panda_link8"
                      frame_id="panda_link8"
                      direction="0.0,0.0,-1.0"/>
      </SerialContainer>
      <MoveTo step_name="move home"
              group="panda_arm"
              goal="ready"
              planner_type="Pipeline"/>
    </Sequence>
  </BehaviorTree>
</root>
